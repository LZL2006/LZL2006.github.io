<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>李振亮的星空 | Li Zhenliang's Space</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #6c5ce7;
            --glass: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --text: #ffffff;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; user-select: none; }
        
        body {
            font-family: 'Segoe UI', sans-serif;
            background: #0f0c29;
            background: linear-gradient(to bottom, #0f0c29, #302b63, #24243e);
            color: var(--text);
            overflow: hidden;
            height: 100vh;
            width: 100vw;
        }

        /* 动态背景 Canvas */
        #star-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
        }

        /* 登录遮罩 */
        #login-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.85);
            backdrop-filter: blur(10px);
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            transition: opacity 0.5s;
        }

        .login-box {
            background: var(--glass);
            padding: 2rem;
            border-radius: 20px;
            border: 1px solid var(--glass-border);
            text-align: center;
            box-shadow: 0 0 30px rgba(108, 92, 231, 0.5);
            animation: pulse-border 2s infinite;
        }

        .login-box input {
            background: rgba(0,0,0,0.5);
            border: 1px solid var(--primary);
            color: white;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
            outline: none;
        }

        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            transition: 0.3s;
            font-weight: bold;
        }
        .btn:hover { transform: scale(1.05); box-shadow: 0 0 15px var(--primary); }

        /* 主容器 */
        #app {
            position: relative;
            z-index: 10;
            height: 100%;
            display: flex;
            flex-direction: column;
            opacity: 0;
            transition: opacity 1s;
        }

        /* 导航栏 */
        .nav {
            display: flex;
            justify-content: center;
            padding: 20px;
            background: rgba(0,0,0,0.3);
            backdrop-filter: blur(5px);
        }

        .nav-item {
            margin: 0 15px;
            cursor: pointer;
            opacity: 0.7;
            transition: 0.3s;
            font-size: 1.1rem;
        }
        .nav-item.active, .nav-item:hover { opacity: 1; text-shadow: 0 0 10px #fff; border-bottom: 2px solid var(--primary); }

        /* 内容区域 */
        .content-area {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: none;
            animation: fadeIn 0.5s;
        }
        .content-area.active { display: block; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes pulse-border { 0% { box-shadow: 0 0 10px var(--primary); } 50% { box-shadow: 0 0 25px var(--primary); } 100% { box-shadow: 0 0 10px var(--primary); } }

        /* 卡片通用样式 */
        .card {
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 15px;
            padding: 20px;
            margin: 0 auto 20px;
            max-width: 800px;
            backdrop-filter: blur(5px);
        }

        /* 个人资料页 */
        .profile-header { text-align: center; }
        .avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            border: 3px solid var(--primary);
            margin-bottom: 15px;
            object-fit: cover;
            /* 默认头像占位 */
            background-image: url('https://api.dicebear.com/7.x/adventurer/svg?seed=LiZhenliang');
            background-size: cover;
        }
        
        .school-link {
            color: #74b9ff;
            text-decoration: none;
            font-size: 0.9rem;
            display: inline-block;
            margin: 5px 0;
            transition: 0.3s;
        }
        .school-link:hover { color: #fff; transform: scale(1.1); }

        .social-grid {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }
        .social-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            background: rgba(255,255,255,0.1);
            cursor: pointer;
            transition: 0.3s;
        }
        .social-btn.qq:hover { background: #12B7F5; }
        .social-btn.wx:hover { background: #07C160; }
        .social-btn.bili:hover { background: #FB7299; }
/* 资源列表 */
        .resource-list { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; }
        .res-item {
            background: rgba(0,0,0,0.3);
            padding: 10px;
            border-radius: 8px;
            text-decoration: none;
            color: #ddd;
            display: flex;
            align-items: center;
            transition: 0.3s;
            font-size: 0.9rem;
        }
        .res-item:hover { background: var(--primary); color: white; transform: translateX(5px); }
        .res-item i { margin-right: 10px; width: 20px; text-align: center;}

        /* 博客 */
        .blog-post { margin-bottom: 20px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 20px; }
        .blog-title { color: var(--primary); font-size: 1.5rem; margin-bottom: 10px; }
        .blog-date { font-size: 0.8rem; color: #888; margin-bottom: 10px; }
        textarea.blog-input { width: 100%; background: rgba(0,0,0,0.3); border: 1px solid #555; color: white; padding: 10px; border-radius: 5px; min-height: 100px; margin-bottom: 10px;}

        /* 付款码 */
        .pay-modal {
            display: none;
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); z-index: 100;
            justify-content: center; align-items: center;
        }
        .pay-img { max-width: 300px; border-radius: 10px; }

        /* 音乐可视化 */
        #visualizer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100px;
            z-index: 1;
            pointer-events: none;
            opacity: 0.6;
        }

        /* 提示框 */
        #toast {
            position: fixed; top: 20px; left: 50%; transform: translateX(-50%);
            background: var(--primary); color: white; padding: 10px 20px;
            border-radius: 20px; z-index: 10000; opacity: 0; transition: 0.3s;
            pointer-events: none;
        }

        /* 移动端适配 */
        @media (max-width: 600px) {
            .resource-list { grid-template-columns: 1fr; }
            .avatar { width: 100px; height: 100px; }
        }
    </style>
</head>
<body>

    <canvas id="star-canvas"></canvas>
    <canvas id="visualizer"></canvas>

    <div id="login-overlay">
        <div class="login-box">
            <h2 style="margin-bottom: 20px;">欢迎进入李振亮的星空</h2>
            <input type="text" placeholder="用户名 (User)" id="username-input">
            <input type="password" placeholder="密码 (默认: admin)" id="password-input">
            <button class="btn" onclick="attemptLogin()">进入 / Enter</button>
            <p style="font-size: 12px; margin-top: 10px; color: #aaa;">点击按钮播放背景音乐</p>
        </div>
    </div>

    <div id="toast">提示信息</div>

    <div class="pay-modal" id="payModal" onclick="this.style.display='none'">
        <div class="card" style="text-align: center;" onclick="event.stopPropagation()">
            <h3><i class="fas fa-mug-hot"></i> 请我喝杯咖啡</h3>
            <p style="font-size: 0.8rem; margin: 10px 0;">感谢您的支持！</p>
            <img src="pay.jpg" alt="付款码" class="pay-img" onerror="this.src='https://via.placeholder.com/300x300?text=QR+Code+Here'">
        </div>
    </div>

    <div id="app">
        <nav class="nav">
            <div class="nav-item active" onclick="switchTab('home')">个人主页</div>
            <div class="nav-item" onclick="switchTab('blog')">博客日志</div>
            <div class="nav-item" onclick="switchTab('resources')">资源宝库</div>
        </nav>

        <div id="home" class="content-area active">
            <div class="card profile-header">
                <img src="avatar.jpg" class="avatar" onerror="this.src='https://api.dicebear.com/7.x/adventurer/svg?seed=LiZhenliang'" alt="Avatar">
                <h1>李振亮</h1>
                <p style="color: #aaa; margin-top: 5px;">Design & Code & Dream</p>
                
                <a href="https://j.map.baidu.com/5f/2b" target="_blank" class="school-link">
                    <i class="fas fa-map-marker-alt"></i> 江西警察学院 (点击查看地图)
                </a>

                <div class="social-grid">
                    <div class="social-btn qq" onclick="handleSocial('qq', '3525613509')">
                        <i class="fab fa-qq"></i>
                    </div>
                    <div class="social-btn wx" onclick="handleSocial('wx', 'L15374324282')">
                        <i class="fab fa-weixin"></i>
                    </div>
                    <div class="social-btn bili" onclick="window.open('https://space.bilibili.com/470831665')">
                        <i class="fab fa-bilibili"></i>
                    </div>
                    <div class="social-btn" onclick="document.getElementById('payModal').style.display='flex'" style="background: #e17055;">
                        <i class="fas fa-qrcode"></i>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <h3><i class="fas fa-quote-left"></i> 关于我</h3>
                <p style="margin-top: 10px; line-height: 1.6;">
                    热爱技术，仰望星空。<br>
                    这里是我的个人空间，记录学习与生活。<br>
                    “醒来的时候，不知道自己为什么会哭，时常会有这样的情况，做过的梦总是回想不起，只是，有一种什么在消失的丧失感。” —— 《你的名字》
</p>
            </div>
        </div>

        <div id="blog" class="content-area">
            <div class="card">
                <h3>发布新动态</h3>
                <textarea id="new-blog-content" class="blog-input" placeholder="今天发生了什么？..."></textarea>
                <button class="btn" onclick="postBlog()" style="width: 100%">发布</button>
            </div>
            <div id="blog-feed">
                <div class="card blog-post">
                    <div class="blog-title">欢迎来到我的个人站</div>
                    <div class="blog-date">2025-12-05</div>
                    <p>网站搭建完成！采用了《你的名字》风格的动态背景，整合了我的常用资源库。欢迎互换友链！</p>
                </div>
            </div>
        </div>

        <div id="resources" class="content-area">
            <div class="card">
                <h3><i class="fas fa-tools"></i> 常用工具 & 教程</h3>
                <div class="resource-list" id="res-tools"></div>
            </div>
            <div class="card">
                <h3><i class="fas fa-book"></i> 学习资料</h3>
                <div class="resource-list" id="res-study"></div>
            </div>
            <div class="card">
                <h3><i class="fas fa-link"></i> 其它收藏</h3>
                <div class="resource-list" id="res-other"></div>
            </div>
        </div>
    </div>

    <audio id="audio-player" src="wasted.mp3" loop crossOrigin="anonymous"></audio>

<script>
    // --- 1. 配置与初始化 ---
    const CONFIG = {
        password: "admin", // 默认登录密码
        // 从 provided file 解析的数据
        resources: [
            { cat: 'tools', title: 'Termux Android终端', url: 'https://github.com/termux/termux-app', icon: 'fa-terminal' },
            { cat: 'tools', title: 'Rufus 启动盘制作', url: 'https://rufus.ie/downloads/', icon: 'fa-hdd' },
            { cat: 'tools', title: '秘塔写作猫', url: 'https://xiezuocat.com/', icon: 'fa-pen-nib' },
            { cat: 'tools', title: '果核剥壳', url: 'https://www.ghxi.com/', icon: 'fa-lemon' },
            { cat: 'study', title: 'B站 C语言教程', url: 'https://www.bilibili.com/video/BV1Ps411U7tS', icon: 'fa-code' },
            { cat: 'study', title: 'Kali Linux 教程', url: 'https://www.bilibili.com/video/BV1ho4y1D7vh', icon: 'fa-user-secret' },
            { cat: 'study', title: 'ThinkPHP 框架', url: 'https://www.thinkphp.cn/', icon: 'fa-php' },
            { cat: 'study', title: 'Hexo 博客框架', url: 'https://hexo.io/zh-cn/', icon: 'fa-blog' },
            { cat: 'other', title: 'SpaceWeather 天文', url: 'https://www.spaceweather.com/', icon: 'fa-star' },
            { cat: 'other', title: 'GitHub 代码托管', url: 'https://github.com/', icon: 'fa-github' },
            { cat: 'other', title: 'CSDN 博客', url: 'https://blog.csdn.net/', icon: 'fa-book-open' },
            { cat: 'other', title: 'Office Tool Plus', url: 'https://otp.landian.vip/zh-cn/', icon: 'fa-windows' }
        ]
    };
// --- 2. 登录逻辑 ---
    function attemptLogin() {
        const pass = document.getElementById('password-input').value;
        if(pass === CONFIG.password || pass === "") { // 允许空密码方便测试
            document.getElementById('login-overlay').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('login-overlay').style.display = 'none';
                document.getElementById('app').style.opacity = '1';
                initAudio(); // 启动音频
            }, 500);
            renderResources();
        } else {
            showToast("密码错误！");
            // 震动特效
            document.querySelector('.login-box').style.animation = 'shake 0.5s';
            setTimeout(() => document.querySelector('.login-box').style.animation = 'pulse-border 2s infinite', 500);
        }
    }

    // --- 3. 页面交互逻辑 ---
    function switchTab(id) {
        document.querySelectorAll('.content-area').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        event.target.classList.add('active');
    }

    function handleSocial(type, value) {
        // 复制到剪贴板
        navigator.clipboard.writeText(value).then(() => {
            if(type === 'qq') {
                showToast(`QQ号 ${value} 已复制，尝试唤起QQ...`);
                // 尝试DeepLink，手机端有效
                setTimeout(() => { window.location.href = `mqqwpa://im/chat?chat_type=wpa&uin=${value}&version=1&src_type=web`; }, 1000);
            } else if (type === 'wx') {
                showToast(`微信号 ${value} 已复制，请打开微信添加`);
                setTimeout(() => { window.location.href = "weixin://"; }, 1000);
            }
        });
    }

    function showToast(msg) {
        const t = document.getElementById('toast');
        t.innerText = msg;
        t.style.opacity = '1';
        t.style.top = '50px';
        setTimeout(() => {
            t.style.opacity = '0';
            t.style.top = '20px';
        }, 3000);
    }

    function postBlog() {
        const content = document.getElementById('new-blog-content').value;
        if(!content) return showToast("写点什么吧~");
        
        const feed = document.getElementById('blog-feed');
        const div = document.createElement('div');
        div.className = 'card blog-post';
        div.innerHTML = `
            <div class="blog-title">我的新动态</div>
            <div class="blog-date">${new Date().toLocaleDateString()}</div>
            <p>${content}</p>
        `;
        feed.prepend(div);
        document.getElementById('new-blog-content').value = "";
        showToast("发布成功！");
    }

    function renderResources() {
        CONFIG.resources.forEach(res => {
            const html = `<a href="${res.url}" target="_blank" class="res-item"><i class="fas ${res.icon}"></i> ${res.title}</a>`;
            const container = document.getElementById(`res-${res.cat}`) || document.getElementById('res-other');
            container.innerHTML += html;
        });
    }

    // --- 4. 星空背景特效 (Canvas) ---
    const canvas = document.getElementById('star-canvas');
    const ctx = canvas.getContext('2d');
    let width, height;
    let stars = [];
    let meteors = [];

    function resize() {
        width = window.innerWidth;
        height = window.innerHeight;
        canvas.width = width;
        canvas.height = height;
    }
    window.addEventListener('resize', resize);
    resize();

    class Star {
        constructor() {
            this.x = Math.random() * width;
            this.y = Math.random() * height;
            this.size = Math.random() * 2;
            this.opacity = Math.random();
            this.speed = Math.random() * 0.05;
        }
        draw() {
            ctx.fillStyle = `rgba(255, 255, 255, ${this.opacity})`;
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
            ctx.fill();
        }
        update() {
            this.opacity += Math.sin(Date.now() * 0.001 * this.speed) * 0.01;
            this.draw();
        }
    }

    class Meteor {
        constructor() {
            this.reset();
        }
        reset() {
            this.x = Math.random() * width + 300;
            this.y = -100;
            this.len = Math.random() * 80 + 100;
            this.speed = Math.random() * 10 + 6;
            this.size = Math.random() * 2 + 0.1;
            this.angle = 45; // 角度
        }
        draw() {
            ctx.save();
            ctx.translate(this.x, this.y);
            ctx.rotate(this.angle * Math.PI / 180);
            
            const gradient = ctx.createLinearGradient(0, 0, this.len, 0);
            gradient.addColorStop(0, "rgba(255,255,255,1)");
            gradient.addColorStop(1, "rgba(255,255,255,0)");
            
            ctx.fillStyle = gradient;
            ctx.beginPath();
            ctx.moveTo(0, 0);
            ctx.lineTo(this.len, 0);
            ctx.lineTo(this.len, this.size);
            ctx.lineTo(0, this.size);
            ctx.fill();
            ctx.restore();
        }
        update() {
            this.x -= this.speed;
            this.y += this.speed;
            if (this.x < -300 || this.y > height + 300) {
                if(Math.random() > 0.98) this.reset(); // 随机重置
            }
            this.draw();
        }
    }

    for(let i=0; i<200; i++) stars.push(new Star());
    for(let i=0; i<4; i++) meteors.push(new Meteor()); // 流星数量

    // --- 点击火花特效 ---
    let sparks = [];
    class Spark {
        constructor(x, y) {
            this.x = x; this.y = y;
            this.vx = (Math.random() - 0.5) * 10;
            this.vy = (Math.random() - 0.5) * 10;
            this.life = 1;
            this.color = `hsl(${Math.random()*360}, 100%, 50%)`;
        }
        update() {
            this.x += this.vx; this.y += this.vy;
            this.life -= 0.05;
            this.vy += 0.2; // 重力
            
            ctx.globalAlpha = this.life;
            ctx.fillStyle = this.color;
            ctx.beginPath();
            ctx.arc(this.x, this.y, 3, 0, Math.PI*2);
            ctx.fill();
            ctx.globalAlpha = 1;
        }
    }

    // 动画循环
    function animate() {
        ctx.clearRect(0, 0, width, height);
        stars.forEach(s => s.update());
        meteors.forEach(m => m.update());
        
        for(let i=0; i<sparks.length; i++) {
            sparks[i].update();
            if(sparks[i].life <= 0) { sparks.splice(i, 1); i--; }
        }
        requestAnimationFrame(animate);
    }
    animate();

    // 监听点击/触摸产生火花
    ['mousedown', 'touchstart'].forEach(evt => {
        window.addEventListener(evt, (e) => {
            const x = e.clientX || e.touches[0].clientX;
            const y = e.clientY || e.touches[0].clientY;
            for(let i=0; i<10; i++) sparks.push(new Spark(x, y));
        });
    });

    // --- 5. 音乐可视化 (Web Audio API) ---
    function initAudio() {
        const audio = document.getElementById('audio-player');
        const vCanvas = document.getElementById('visualizer');
        const vCtx = vCanvas.getContext('2d');
        
        // 注意：浏览器可能阻止自动播放，需要在交互（点击登录）后初始化
        try {
            audio.play();
            const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            const src = audioCtx.createMediaElementSource(audio);
            const analyser = audioCtx.createAnalyser();
            
            src.connect(analyser);
            analyser.connect(audioCtx.destination);
            analyser.fftSize = 256;
            
            const bufferLength = analyser.frequencyBinCount;
            const dataArray = new Uint8Array(bufferLength);
            
            vCanvas.width = window.innerWidth;
            vCanvas.height = 100;

            function renderFrame() {
                requestAnimationFrame(renderFrame);
                analyser.getByteFrequencyData(dataArray);
                
                vCtx.clearRect(0, 0, vCanvas.width, vCanvas.height);
                const barWidth = (vCanvas.width / bufferLength) * 2.5;
                let barHeight;
                let x = 0;
                
                for(let i = 0; i < bufferLength; i++) {
                    barHeight = dataArray[i] / 2;
                    vCtx.fillStyle = `rgb(${barHeight + 100}, 50, 200)`;
                    vCtx.fillRect(x, vCanvas.height - barHeight, barWidth, barHeight);
                    x += barWidth + 1;
                }
            }
            renderFrame();
        } catch(e) {
            console.log("Audio visualizer blocked or failed (local files might need server).");
            // 失败回退逻辑：只播放音频
            audio.play();
        }
    }

    // CSS shake animation keyframes injection
    const styleSheet = document.createElement("style");
    styleSheet.innerText = `
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            50% { transform: translateX(10px); }
            75% { transform: translateX(-10px); }
            100% { transform: translateX(0); }
        }
    `;
    document.head.appendChild(styleSheet);
</script>
</body>
</html>